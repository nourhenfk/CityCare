<ion-header [translucent]="true" class="creative-header">
  <ion-toolbar color="primary" class="animated-toolbar">
    <!-- Animated background gradient -->
    <div class="header-gradient"></div>




    <!-- Animated title with decorative elements -->
    <div class="title-wrapper">
      <ion-title class="animated-title">
        <span class="title-text">Connexion</span>
        <span class="title-accent"></span>
      </ion-title>
    </div>

    <!-- Decorative animated elements -->
    <div class="header-decorations">
      <div class="decoration-dot dot-1"></div>
      <div class="decoration-dot dot-2"></div>
      <div class="decoration-dot dot-3"></div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <!-- Logo et titre de l'application -->
  <div class="auth-container">
    <div class="logo-section">
      <!-- <CHANGE> Using custom app logo instead of ionic icon -->
      <div class="logo-wrapper">
        <img src="assets/logo.svg" alt="CityCare Logo" class="logo-icon">
      </div>
      <h1 class="fade-in-up">CityCare</h1>
      <p class="fade-in-up delay-1">Signalez les problèmes urbains</p>
    </div>

    <!-- Formulaire de connexion -->
    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="form-container">

      <!-- Champ Email -->
      <div class="input-wrapper fade-in-up delay-2">
        <ion-item class="input-item">
          <ion-icon name="mail-outline" slot="start" class="input-icon"></ion-icon>
          <ion-input type="email" placeholder="Email" formControlName="email"
            [class.ion-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
          <p class="error-message">Email invalide</p>
        </ion-text>
      </div>

      <!-- Champ Mot de passe -->
      <div class="input-wrapper fade-in-up delay-3">
        <ion-item class="input-item">
          <ion-icon name="lock-closed-outline" slot="start" class="input-icon"></ion-icon>
          <ion-input [type]="showPassword ? 'text' : 'password'" placeholder="Mot de passe" formControlName="password"
            [class.ion-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"></ion-input>
          <ion-icon slot="end" [name]="showPassword ? 'eye-off-outline' : 'eye-outline'" (click)="togglePassword()"
            class="password-toggle"></ion-icon>
        </ion-item>
        <ion-text color="danger" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          <p class="error-message">Le mot de passe est requis</p>
        </ion-text>
      </div>

      <!-- Message d'erreur général -->
      <ion-text color="danger" *ngIf="errorMessage" class="error-alert">
        <p class="error-message">{{ errorMessage }}</p>
      </ion-text>

      <!-- Bouton de connexion -->
      <ion-button expand="block" type="submit" [disabled]="loginForm.invalid || loading"
        class="login-button fade-in-up delay-4">
        <ion-spinner name="crescent" *ngIf="loading"></ion-spinner>
        <span *ngIf="!loading">Se connecter</span>
      </ion-button>

    </form>

    <!-- Lien vers l'inscription -->
    <div class="register-link fade-in-up delay-5">
      <p>
        Pas encore de compte ?
        <a (click)="goToRegister()" class="register-link-text">S'inscrire</a>
      </p>
    </div>

  </div>

</ion-content>